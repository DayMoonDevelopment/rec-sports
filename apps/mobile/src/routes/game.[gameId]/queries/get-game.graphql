fragment TeamNode on Team {
  id
  name
  members {
    id
    displayName
    firstName
    lastName
    photo {
      source
    }
  }
}

fragment GameTeamNode on GameTeam {
  id
  score
  team {
    ...TeamNode
  }
}

fragment GameScoreActionNode on GameScoreAction {
  id
  occurredAt
  occurredByUser {
    id
    displayName
    firstName
    lastName
    photo {
      source
    }
  }
  occurredToTeam {
    ...TeamNode
  }
  value
  key
}

fragment GameNode on Game {
  id
  sport
  status
  scheduledAt
  startedAt
  endedAt
  teams {
    ...GameTeamNode
  }
  location {
    id
    name
    address {
      id
      street
      city
      state
      stateCode
    }
    geo {
      latitude
      longitude
    }
  }
  actions(first: 20) {
    edges {
      node {
        ...GameScoreActionNode
      }
      cursor
    }

    pageInfo {
      hasNextPage
      endCursor
    }
    totalCount
  }
}

query GetGame($id: ID!) {
  game(id: $id) {
    ...GameNode
  }
}
